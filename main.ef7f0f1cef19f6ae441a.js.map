{"version":3,"sources":["webpack:///./templates/imageCardTemplate.hbs","webpack:///./js/apiService.js","webpack:///./index.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","page","query","fetchImages","params","this","fetch","then","response","json","parsedResponse","incrementPage","hits","string","resetPage","refs","searchForm","document","querySelector","gallery","addEventListener","e","preventDefault","innerHTML","apiService","infScroll","pageIndex","option","path","searchQuery","loadNextPage","value","newList","reduce","arr","item","div","createElement","classList","add","imageCardTemplate","push","append","masonryInstance","addItems","imagesLoaded","on","layout","bind","catch","PNotify","error","title","text","Masonry","columnWidth","itemSelector","percentPosition","transitionDuration","fitWidth","gutter","InfiniteScroll","responseType","history","outlayer"],"mappings":"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","file":"main.ef7f0f1cef19f6ae441a.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":10},\"end\":{\"line\":1,\"column\":26}}}) : helper)))\n    + \"\\\" alt=\\\"\\\" data-url=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":45},\"end\":{\"line\":1,\"column\":62}}}) : helper)))\n    + \"\\\" />\\r\\n\\r\\n<div class=\\\"stats\\\">\\r\\n  <p class=\\\"stats-item\\\">\\r\\n    <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n    \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":4},\"end\":{\"line\":6,\"column\":13}}}) : helper)))\n    + \"\\r\\n  </p>\\r\\n  <p class=\\\"stats-item\\\">\\r\\n    <i class=\\\"material-icons\\\">visibility</i>\\r\\n    \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":4},\"end\":{\"line\":10,\"column\":13}}}) : helper)))\n    + \"\\r\\n  </p>\\r\\n  <p class=\\\"stats-item\\\">\\r\\n    <i class=\\\"material-icons\\\">comment</i>\\r\\n    \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":14,\"column\":4},\"end\":{\"line\":14,\"column\":16}}}) : helper)))\n    + \"\\r\\n  </p>\\r\\n  <p class=\\\"stats-item\\\">\\r\\n    <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n    \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":18,\"column\":4},\"end\":{\"line\":18,\"column\":17}}}) : helper)))\n    + \"\\r\\n  </p>\\r\\n</div>\";\n},\"useData\":true});","const baseUrl = 'https://pixabay.com/api/';\r\nconst API_KEY = '16013941-0b7abfb5c3f07bad798dbf718';\r\nexport default {\r\n  page: 1,\r\n  query: '',\r\n  fetchImages() {\r\n    const params = `?image_type=photo&orientation=horizontal&q=${this.query}&page=${this.page}&per_page=12&key=${API_KEY}`;\r\n\r\n    return fetch(baseUrl + params)\r\n      .then(response => response.json())\r\n      .then(parsedResponse => {\r\n        this.incrementPage();\r\n        return parsedResponse.hits;\r\n      });\r\n  },\r\n  get searchQuery() {\r\n    return this.query;\r\n  },\r\n  set searchQuery(string) {\r\n    this.query = string;\r\n  },\r\n  incrementPage() {\r\n    this.page += 1;\r\n  },\r\n  resetPage() {\r\n    this.page = 1;\r\n  },\r\n};\r\n","import './styles.css';\nimport 'material-design-icons/iconfont/material-icons.css';\nimport apiService from './js/apiService';\nimport imageCardTemplate from './templates/imageCardTemplate.hbs';\nimport PNotify from 'pnotify/dist/es/PNotify.js';\nimport 'pnotify/dist/PNotifyBrightTheme.css';\n// import * as basicLightbox from 'basiclightbox';\n// import 'basiclightbox/dist/basicLightbox.min.css';\nimport Masonry from 'masonry-layout';\nimport imagesLoaded from 'imagesloaded';\nimport InfiniteScroll from 'infinite-scroll';\n\nconst refs = {\n  searchForm: document.querySelector('#search-form'),\n  gallery: document.querySelector('.gallery'),\n  query: document.querySelector('input[name=\"query\"]'),\n  // loadMoreBtn: document.querySelector('button[data-action=\"load-more\"]'),\n};\n\nrefs.searchForm.addEventListener('submit', handleInputForm);\n// refs.loadMoreBtn.addEventListener('click', fetchImages);\n// refs.gallery.addEventListener('click', showImage);\n\n// function handleInputForm(e) {\n//   e.preventDefault();\n//   clearList();\n//   apiService.resetPage();\n//   apiService.searchQuery = refs.query.value;\n//   fetchImages();\n//   modul();\n//   refs.loadMoreBtn.classList.add('js-btn-visibil');\n// }\n\n// function fetchImages() {\n//   apiService\n//     .fetchImages()\n//     .then(hits => {\n//       createElement(hits);\n//     })\n//     .then(() => scroll())\n//     .catch(() => {\n//       PNotify.error({\n//         title: 'Oh No!',\n//         text: 'Something terrible happened.',\n//       });\n//     });\n// }\n\n// function createElement(items) {\n//   const newList = items.map(item => imageCardTemplate(item)).join('');\n//   refs.gallery.insertAdjacentHTML('beforeend', newList);\n// }\n\n// function clearList() {\n//   refs.gallery.innerHTML = '';\n//   refs.loadMoreBtn.classList.remove('js-btn-visibil');\n// }\n\n// function scroll() {\n//   window.scrollTo({\n//     top: document.body.scrollHeight,\n//     behavior: 'smooth',\n//   });\n// }\n\n// function modul() {\n//   const success = PNotify.success({\n//     title: 'Desktop Success',\n//     text: 'All done! Come back to my tab!',\n//     modules: {\n//       Buttons: {\n//         closer: false,\n//         sticker: false,\n//       },\n//       Desktop: {\n//         desktop: true,\n//       },\n//     },\n//   });\n//   success.on('click', function () {\n//     success.close();\n//   });\n// }\n\n// function showImage(e) {\n//   if (e.target.nodeName === 'IMG') {\n//     const largImg = e.target.dataset.url;\n//     basicLightbox\n//       .create(\n//         `\n//     \t<img width=\"1200\" height=\"900\" src=\"${largImg}\">\n//     `,\n//       )\n//       .show();\n//   }\n// }\n\nconst masonryInstance = new Masonry(refs.gallery, {\n  columnWidth: '.photo-card',\n  itemSelector: '.photo-card',\n  percentPosition: true,\n  transitionDuration: '0.3s',\n  fitWidth: true,\n  gutter: 10,\n});\n\nconst infScroll = new InfiniteScroll(refs.gallery, {\n  responseType: 'text',\n  history: false,\n  path() {\n    return `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${apiService.searchQuery}&page=${this.pageIndex}&per_page=12&key=16013941-0b7abfb5c3f07bad798dbf718`;\n  },\n  append: '.photo-card',\n  outlayer: masonryInstance,\n});\n\nimagesLoaded(refs.gallery).on(\n  'progress',\n  masonryInstance.layout.bind(masonryInstance),\n);\n\nfunction handleInputForm(e) {\n  e.preventDefault();\n  clearList();\n  apiService.resetPage();\n  infScroll.pageIndex = 1;\n  infScroll.option({\n    path() {\n      return `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${apiService.searchQuery}&page=${apiService.page}&per_page=12&key=16013941-0b7abfb5c3f07bad798dbf718`;\n    },\n  });\n  infScroll.loadNextPage();\n\n  apiService.searchQuery = refs.query.value;\n  fetchImages();\n}\n\nfunction fetchImages() {\n  apiService\n    .fetchImages()\n    .then(hits => {\n      createElement(hits);\n    })\n    .catch(() => {\n      PNotify.error({\n        title: 'Oh No!',\n        text: 'Something terrible happened.',\n      });\n    });\n}\n\nfunction createElement(items) {\n  const newList = items.reduce((arr, item) => {\n    const div = document.createElement('div');\n    div.classList.add('photo-card');\n    div.innerHTML = imageCardTemplate(item);\n    arr.push(div);\n    return arr;\n  }, []);\n  refs.gallery.append(...newList);\n  masonryInstance.addItems(newList);\n  imagesLoaded(refs.gallery).on(\n    'progress',\n    masonryInstance.layout.bind(masonryInstance),\n  );\n}\n\nfunction clearList() {\n  refs.gallery.innerHTML = '';\n}\n"],"sourceRoot":""}